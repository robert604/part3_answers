(this.webpackJsonpworking=this.webpackJsonpworking||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(17),o=t.n(r),s=t(8),c=t(3),i=t(2),a=t(4),u=t.n(a),d="/api/persons",l={getAllPersons:function(){return u.a.get("/api/persons").then((function(e){return e.data}))},createPerson:function(e){return u.a.post("/api/persons",e).then((function(e){return e.data}))},deletePerson:function(e){var n="".concat(d,"/").concat(e);return u.a.delete(n)},updatePerson:function(e){var n="".concat(d,"/").concat(e.id);return u.a.put(n,e)}},f=t(0),j=function(e){var n=e.person,t=e.persons,r=e.setPersons,o=e.setMessage;return Object(f.jsxs)("div",{children:[n.name," ",n.number," ",Object(f.jsx)("button",{onClick:function(e){window.confirm("Confirm deletion of ".concat(n.name))&&l.deletePerson(n.id).then((function(e){r(t.filter((function(e){return e.id!==n.id}))),O(o,{string:"Deleted person: ".concat(n.name),isError:!1})}))},children:"delete"})]})},b=function(e){var n=e.filtered,t=e.persons,r=e.setPersons,o=e.setMessage;return n.map((function(e){return Object(f.jsx)(j,{person:e,persons:t,setPersons:r,setMessage:o},e.id)}))},h=function(e){var n=e.filterText,t=e.filterTextChangeHandler;return Object(f.jsxs)("div",{children:["filter shown with",Object(f.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.message;if(null===n)return null;var t=n.string,r={color:"green",background:"lightgrey",borderStyle:"solid",borderRadius:"5px",marginBottom:"10px",padding:"10px",fontSize:"20px"};return n.isError&&(r.color="red"),Object(f.jsx)("div",{style:r,children:t})};function O(e,n){e(n),setTimeout((function(){return e(null)}),5e3)}var g=function(){var e=Object(i.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(i.useState)(""),a=Object(c.a)(o,2),u=a[0],d=a[1],j=Object(i.useState)(""),g=Object(c.a)(j,2),m=g[0],v=g[1],x=Object(i.useState)(""),w=Object(c.a)(x,2),P=w[0],C=w[1],k=Object(i.useState)(null),y=Object(c.a)(k,2),E=y[0],S=y[1];return Object(i.useEffect)((function(){l.getAllPersons().then((function(e){r(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(p,{message:E}),Object(f.jsx)(h,{filterText:P,filterTextChangeHandler:function(e){C(e.target.value)}}),Object(f.jsxs)("form",{children:[Object(f.jsx)("h2",{children:"add a new"}),Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:u,onChange:function(e){d(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:m,onChange:function(e){v(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var n=t.find((function(e){return e.name===u}));if(void 0!==n){if(window.confirm("".concat(u," is already added to phonebook. Replace the old number with the new one?"))){var o=Object(s.a)(Object(s.a)({},n),{},{number:m});l.updatePerson(o).then((function(e){r(t.map((function(n){return n.id===o.id?e.data:n}))),O(S,{string:"Updated person: ".concat(e.data.name),isError:!1})})).catch((function(e){O(S,{string:"Information for ".concat(o.name," has already been removed from the server"),isError:!0}),l.getAllPersons().then((function(e){r(e)}))}))}}else{var c={name:u,number:m,id:t.length+1};l.createPerson(c).then((function(e){r(t.concat(e)),O(S,{string:"Added person: ".concat(e.name),isError:!1})}))}d(""),v("")},children:"add"})})]}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(b,{filtered:t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})),persons:t,setPersons:r,setMessage:S})]})};o.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.98d903d5.chunk.js.map