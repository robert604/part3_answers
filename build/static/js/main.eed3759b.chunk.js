(this.webpackJsonpworking=this.webpackJsonpworking||[]).push([[0],{44:function(e,n,t){"use strict";t.r(n);var r=t(19),s=t.n(r),o=t(20),c=t(10),a=t(4),i=t(2),u=t(3),d=t.n(u),l="/api/persons",j={getAllPersons:function(){return d.a.get("/api/persons").then((function(e){return e.data}))},createPerson:function(e){return d.a.post("/api/persons",e).then((function(e){return e.data}))},deletePerson:function(e){var n="".concat(l,"/").concat(e);return d.a.delete(n)},updatePerson:function(e){var n="".concat(l,"/").concat(e.id);return d.a.put(n,e)},findPersons:function(e){return d.a.get("/api/persons",{params:e})}},f=t(0),b=function(e){var n=e.person,t=e.persons,r=e.setPersons,s=e.setMessage;return Object(f.jsxs)("div",{children:[n.name," ",n.number," ",Object(f.jsx)("button",{onClick:function(e){window.confirm("Confirm deletion of ".concat(n.name))&&j.deletePerson(n.id).then((function(e){r(t.filter((function(e){return e.id!==n.id}))),g(s,{string:"Deleted person: ".concat(n.name),isError:!1})}))},children:"delete"})]})},p=function(e){var n=e.filtered,t=e.persons,r=e.setPersons,s=e.setMessage;return n.map((function(e){return Object(f.jsx)(b,{person:e,persons:t,setPersons:r,setMessage:s},e.id)}))},h=function(e){var n=e.filterText,t=e.filterTextChangeHandler;return Object(f.jsxs)("div",{children:["filter shown with",Object(f.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.message;if(null===n)return null;var t=n.string,r={color:"green",background:"lightgrey",borderStyle:"solid",borderRadius:"5px",marginBottom:"10px",padding:"10px",fontSize:"20px"};return n.isError&&(r.color="red"),Object(f.jsx)("div",{style:r,children:t})};function g(e,n){e(n),setTimeout((function(){return e(null)}),5e3)}var v=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],s=Object(i.useState)(""),u=Object(a.a)(s,2),d=u[0],l=u[1],b=Object(i.useState)(""),v=Object(a.a)(b,2),x=v[0],m=v[1],P=Object(i.useState)(""),w=Object(a.a)(P,2),C=w[0],k=w[1],E=Object(i.useState)(null),S=Object(a.a)(E,2),y=S[0],T=S[1];return Object(i.useEffect)((function(){j.getAllPersons().then((function(e){r(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(O,{message:y}),Object(f.jsx)(h,{filterText:C,filterTextChangeHandler:function(e){k(e.target.value)}}),Object(f.jsxs)("form",{children:[Object(f.jsx)("h2",{children:"add a new"}),Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:d,onChange:function(e){l(e.target.value)}})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:x,onChange:function(e){m(e.target.value)}})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),j.findPersons({name:d}).then((function(e){var n=e.data;if(n.length>0){var s=Object(c.a)(Object(c.a)({},n[0]),{},{name:d,number:x});j.updatePerson(s).then((function(e){var n=e.data,s=t.findIndex((function(e){return e.id===n.id})),c=Object(o.a)(t);c[s]=n,r(c),g(T,{string:"Updated person: ".concat(n.name),isError:!1})})).catch((function(e){var n=e.response.data.error;g(T,{string:n,isError:!0})}))}else{var a={name:d,number:x};j.createPerson(a).then((function(e){r(t.concat(e)),g(T,{string:"Added person: ".concat(e.name),isError:!1})})).catch((function(e){var n=e.response.data.error;g(T,{string:n,isError:!0})}))}})),l(""),m("")},children:"add"})})]}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(p,{filtered:t.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())})),persons:t,setPersons:r,setMessage:T})]})};s.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.eed3759b.chunk.js.map